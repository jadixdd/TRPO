{% extends 'app/base.html' %}
{% block title %}Дашборд{% endblock title %}
{% block content %}
<div class="max-w-7xl mx-auto p-4">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-[#2F5233]">Дашборд</h1>
        <a href="{% url 'expenses' %}" class="flex items-center gap-2 px-5 py-3 bg-[#7DAF84] hover:bg-[#6A9A70] text-white rounded-xl font-medium transition shadow-md">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 5v14"/>
                <path d="M5 12h14"/>
            </svg>
            Добавить трату
        </a>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

        <!-- Последние траты -->
        <div class="bg-white rounded-2xl shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-[#2F5233]">Последние траты</h3>
                <a href="{% url 'expenses' %}" class="text-sm text-[#7DAF84] hover:underline">Все</a>
            </div>
            <div class="space-y-3 text-sm text-[#2F5233]">
                {% for expense in recent_expenses %}
                <div class="flex justify-between">
                    <span>{{ expense.date|date:"d M Y" }}</span>
                    <span class="font-medium">{{ expense.category.name }}</span>
                    <span class="text-red-600">-{{ expense.amount|floatformat:2 }} ₽</span>
                </div>
                {% empty %}
                <p class="text-[#999] text-center py-2">Пока нет трат</p>
                {% endfor %}
            </div>
        </div>

        <!-- Отчёт за месяц (заглушка) -->
        <div class="bg-white rounded-2xl shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-[#2F5233]">Отчёт за месяц</h3>
                <a href="{% url 'reports' %}" class="text-sm text-[#7DAF84] hover:underline">Подробнее</a>
            </div>
            <div class="h-40 bg-gradient-to-br from-[#E8F6EA] to-[#D5EAD8] rounded-xl flex items-center justify-center text-[#7DAF84] font-medium">
                [График]
            </div>
            <div class="mt-3 text-center">
                <a href="{% url 'reports' %}" class="text-sm px-4 py-2 bg-[#E8F6EA] hover:bg-[#D5EAD8] text-[#2F5233] rounded-lg transition inline-block">
                    Просмотр отчёта
                </a>
            </div>
        </div>

        <!-- Распределение трат (заглушка) -->
        <div class="bg-white rounded-2xl shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-[#2F5233]">Распределение трат</h3>
                <a href="{% url 'reports' %}" class="text-sm text-[#7DAF84] hover:underline">Подробнее</a>
            </div>
            <div class="h-40 bg-gradient-to-br from-[#E8F6EA] to-[#D5EAD8] rounded-xl flex items-center justify-center text-[#7DAF84] font-medium">
                [Круговая диаграмма]
            </div>
        </div>

        <!-- Категории -->
        <div class="bg-white rounded-2xl shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-[#2F5233]">Категории</h3>
                <a href="{% url 'categories' %}" class="text-sm text-[#7DAF84] hover:underline">Управление</a>
            </div>
            <ul class="space-y-2 text-sm text-[#2F5233]">
                {% for cat in user_categories %}
                <li class="flex justify-between">
                    <span>{{ cat.name }}</span>
                    <span class="text-[#7DAF84]">Active</span>
                </li>
                {% empty %}
                <li class="text-[#999] text-center py-2">Нет категорий</li>
                {% endfor %}
            </ul>
            <div class="mt-4 text-center">
                <a href="{% url 'expenses' %}" class="text-sm px-4 py-2 bg-[#E8F6EA] hover:bg-[#D5EAD8] text-[#2F5233] rounded-lg transition inline-block">
                    Добавить категорию
                </a>
            </div>
        </div>

    </div>
</div>
{% endblock content %}